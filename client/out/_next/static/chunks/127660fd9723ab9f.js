(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51182,e=>{"use strict";var t=e.i(49973),a=e.i(18939),s=e.i(33207),r=e.i(30209),i=e.i(63257),l=e.i(4370),n=e.i(97910),o=e.i(67881),d=e.i(94179),c=e.i(23750),m=e.i(27341),x=e.i(27700),h=e.i(13862),u=e.i(31016),g=e.i(9020),p=e.i(51946),j=e.i(71628),b=e.i(49643),N=e.i(79278),v=e.i(66974),f=e.i(16024),w=e.i(9958),y=e.i(49202);let C=(0,e.i(98631).default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var F=e.i(69742),k=e.i(67013),B=e.i(13622),A=e.i(50601),D=e.i(67477),P=e.i(78854),L=e.i(50154),T=e.i(56625),E=e.i(86914),_=e.i(29126),S=e.i(86094),R=e.i(99688),I=e.i(10708),$=e.i(47163),M=e.i(24232);let q=[{value:"NORMAL",label:"Normal",description:"3-5 dias uteis"},{value:"HIGH",label:"Alta",description:"1-2 dias uteis"},{value:"URGENT",label:"Urgente",description:"Mesmo dia ou proximo"}];function O(e){return e.replace(/\D/g,"")}function z(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function G({open:e,onOpenChange:s,onOrderCreated:r,tifluxTicket:i}){let l,[n,m]=(0,a.useState)({destinoCep:"",destinoNome:"",destinoEndereco:"",destinoNumero:"",destinoComplemento:"",destinoBairro:"",destinoCidade:"",destinoEstado:"",peso:"",comprimento:String(30),largura:String(20),altura:String(10),valorDeclarado:"",urgencia:"NORMAL"}),[u,j]=(0,a.useState)({}),[b,v]=(0,a.useState)(!1),[f,w]=(0,a.useState)("form"),[y,C]=(0,a.useState)(!1),[G,U]=(0,a.useState)(!1),[H,K]=(0,a.useState)(null),[Q,V]=(0,a.useState)([]),[,X]=(0,a.useState)(null),[J,W]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=O(n.destinoCep);8!==e.length||(async()=>{v(!0);try{let t=await fetch(`https://viacep.com.br/ws/${e}/json/`),a=await t.json();a.erro||m(e=>({...e,destinoEndereco:a.logradouro||"",destinoBairro:a.bairro||"",destinoCidade:a.localidade||"",destinoEstado:a.uf||"",destinoComplemento:a.complemento||""}))}catch(e){console.error("[NovaOrdemModal] Failed to fetch CEP:",e)}finally{v(!1)}})()},[n.destinoCep]);let Y=(0,a.useCallback)((e,t)=>{m(a=>({...a,[e]:t})),e in u&&j(t=>({...t,[e]:void 0}))},[u]),Z=(0,a.useCallback)(()=>{let e={},t=O(n.destinoCep);t&&8===t.length||(e.destinoCep="CEP deve ter 8 digitos"),n.destinoNumero&&""!==n.destinoNumero.trim()||(e.destinoNumero="Numero e obrigatorio");let a=parseFloat(n.peso);return(!n.peso||isNaN(a)||a<=0)&&(e.peso="Peso deve ser maior que zero"),j(e),0===Object.keys(e).length},[n.destinoCep,n.destinoNumero,n.peso]),ee=(0,a.useCallback)(async()=>{if(Z()){C(!0),K(null);try{let e={origin_cep:"04548005",destination_cep:O(n.destinoCep),weight_kg:parseFloat(n.peso),dimensions:{length:parseFloat(n.comprimento)||30,width:parseFloat(n.largura)||20,height:parseFloat(n.altura)||10},value:n.valorDeclarado?parseFloat(n.valorDeclarado):0,urgency:n.urgencia},t=await (0,M.getShippingQuotes)(e);if(t.data.success&&t.data.quotes.length>0){V(t.data.quotes),X(t.data.recommendation);let e=t.data.quotes.find(e=>e.carrier===t.data.recommendation?.carrier&&e.available);e&&W(e),w("quotes")}else K(t.data.error||"Nenhuma cotacao disponivel para este destino")}catch(e){console.error("[NovaOrdemModal] Failed to get quotes:",e),K("Erro ao consultar cotacoes. Tente novamente.")}finally{C(!1)}}},[n,Z]),et=(0,a.useCallback)(async()=>{if(J){U(!0),w("creating"),K(null);try{let e=[n.destinoEndereco,n.destinoNumero,n.destinoComplemento,n.destinoBairro].filter(Boolean).join(", ")||"Endereco nao informado",t=await (0,M.createPostage)({destination_cep:O(n.destinoCep),destination_name:n.destinoNome||"Destinatario",destination_address:e,destination_city:n.destinoCidade||"Cidade nao informada",destination_state:n.destinoEstado||"SP",weight_kg:parseFloat(n.peso),dimensions:{length:parseFloat(n.comprimento)||30,width:parseFloat(n.largura)||20,height:parseFloat(n.altura)||10},declared_value:n.valorDeclarado?parseFloat(n.valorDeclarado):0,urgency:n.urgencia,selected_quote:J});if(t.data.success&&t.data.posting){let e=t.data.posting,a=e.destination?.name||n.destinoNome||"Destinatario",i=e.destination?.cep||O(n.destinoCep)||"",l={id:e.posting_id,codigo:e.order_code,cliente:a,destino:{nome:a,cep:i},status:e.status||"aguardando",prioridade:(e.urgency||n.urgencia||"normal").toLowerCase(),responsavel:{nome:"Usuario Atual"},itens:[],dataCriacao:e.created_at||new Date().toISOString(),dataPrevista:e.estimated_delivery||J?.delivery_date||"",carrier:e.carrier||J?.carrier||"Correios",trackingCode:e.tracking_code,price:e.price||J?.price||0};r(l),s(!1)}else console.error("[NovaOrdemModal] API returned error:",t.data.error),K(t.data.error||"Erro ao criar postagem. Tente novamente."),w("quotes")}catch(e){console.error("[NovaOrdemModal] Failed to create order:",e),K("Erro ao criar postagem. Tente novamente."),w("quotes")}finally{U(!1)}}},[J,n,r,s]),ea=(0,a.useCallback)(()=>{y||G||(m({destinoCep:"",destinoNome:"",destinoEndereco:"",destinoNumero:"",destinoComplemento:"",destinoBairro:"",destinoCidade:"",destinoEstado:"",peso:"",comprimento:String(30),largura:String(20),altura:String(10),valorDeclarado:"",urgencia:"NORMAL"}),j({}),w("form"),V([]),X(null),W(null),K(null),s(!1))},[y,G,s]),es=(0,a.useCallback)(()=>{w("form"),W(null),K(null)},[]);return(0,t.jsx)(k.Root,{open:e,onOpenChange:ea,children:(0,t.jsx)(B.AnimatePresence,{children:e&&(0,t.jsxs)(k.Portal,{forceMount:!0,children:[(0,t.jsx)(k.Overlay,{asChild:!0,children:(0,t.jsx)(F.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-[#151720]/85 backdrop-blur-[24px]"})}),(0,t.jsx)(k.Content,{asChild:!0,children:(0,t.jsxs)(F.motion.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.2,ease:"easeOut"},className:(0,$.cn)("fixed left-1/2 top-1/2 z-50 w-full max-w-[560px] -translate-x-1/2 -translate-y-1/2","bg-[#1a1d28]/90 backdrop-blur-xl","border border-white/[0.06] rounded-2xl shadow-2xl","p-6 max-h-[90vh] overflow-y-auto"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)(k.Title,{className:"text-xl font-semibold text-white flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-[#960A9C]/20 to-[#2226C0]/20 border border-white/[0.04]",children:(0,t.jsx)(g.Package,{className:"w-5 h-5 text-[#00FAFB]"})}),"Nova Ordem de Expedicao"]}),(0,t.jsx)(k.Close,{asChild:!0,children:(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-white/5 transition-colors disabled:opacity-50",disabled:y||G,"aria-label":"Fechar",children:(0,t.jsx)(A.X,{className:"w-5 h-5 text-gray-400"})})})]}),i&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-orange-500/10 border border-orange-500/20",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-orange-400 font-medium",children:"Ticket Tiflux:"}),(0,t.jsxs)("span",{className:"text-white",children:["#",i.ticket_number]}),(0,t.jsx)("span",{className:"text-gray-400",children:"-"}),(0,t.jsx)("span",{className:"text-gray-300 truncate",children:i.client_name})]})}),"creating"!==f&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsxs)("div",{className:(0,$.cn)("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm","form"===f?"bg-[#00FAFB]/10 text-[#00FAFB]":"text-gray-500"),children:[(0,t.jsx)("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center text-xs font-medium",children:"1"}),"Dados"]}),(0,t.jsx)(E.ChevronRight,{className:"w-4 h-4 text-gray-600"}),(0,t.jsxs)("div",{className:(0,$.cn)("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm","quotes"===f?"bg-[#00FAFB]/10 text-[#00FAFB]":"text-gray-500"),children:[(0,t.jsx)("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center text-xs font-medium",children:"2"}),"Cotacoes"]})]}),"form"===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoCep",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(p.MapPin,{className:"w-4 h-4 text-[#00FAFB]"}),"CEP Destino ",(0,t.jsx)("span",{className:"text-[#FD5665]",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Input,{id:"destinoCep",type:"text",placeholder:"00000-000",value:(l=n.destinoCep.replace(/\D/g,"")).length<=5?l:`${l.slice(0,5)}-${l.slice(5,8)}`,onChange:e=>Y("destinoCep",e.target.value),maxLength:9,className:(0,$.cn)("bg-white/5 border-white/10 text-white placeholder:text-gray-500","focus:border-[#00FAFB] focus:ring-[#00FAFB]/20",u.destinoCep&&"border-[#FD5665] focus:border-[#FD5665]"),"aria-invalid":!!u.destinoCep}),b&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,t.jsx)(N.Loader2,{className:"w-4 h-4 animate-spin text-[#00FAFB]"})})]}),u.destinoCep&&(0,t.jsxs)("p",{className:"text-xs text-[#FD5665] flex items-center gap-1",children:[(0,t.jsx)(T.AlertCircle,{className:"w-3 h-3"}),u.destinoCep]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoNome",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(R.User,{className:"w-4 h-4 text-[#00FAFB]"}),"Nome do Destinatario",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"opcional"})]}),(0,t.jsx)(c.Input,{id:"destinoNome",type:"text",placeholder:"Nome do destinatario",value:n.destinoNome,onChange:e=>Y("destinoNome",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoEndereco",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(p.MapPin,{className:"w-4 h-4 text-[#00FAFB]"}),"Rua/Logradouro",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"auto-preenchido"})]}),(0,t.jsx)(c.Input,{id:"destinoEndereco",type:"text",placeholder:"Rua, Avenida, etc.",value:n.destinoEndereco,onChange:e=>Y("destinoEndereco",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoNumero",className:"text-sm font-medium text-gray-300",children:["Número ",(0,t.jsx)("span",{className:"text-[#FD5665]",children:"*"})]}),(0,t.jsx)(c.Input,{id:"destinoNumero",type:"text",placeholder:"123",value:n.destinoNumero,onChange:e=>Y("destinoNumero",e.target.value),className:(0,$.cn)("bg-white/5 border-white/10 text-white placeholder:text-gray-500","focus:border-[#00FAFB] focus:ring-[#00FAFB]/20",u.destinoNumero&&"border-[#FD5665] focus:border-[#FD5665]"),"aria-invalid":!!u.destinoNumero}),u.destinoNumero&&(0,t.jsxs)("p",{className:"text-xs text-[#FD5665] flex items-center gap-1",children:[(0,t.jsx)(T.AlertCircle,{className:"w-3 h-3"}),u.destinoNumero]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoComplemento",className:"text-sm font-medium text-gray-300",children:["Complemento",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"opcional"})]}),(0,t.jsx)(c.Input,{id:"destinoComplemento",type:"text",placeholder:"Apto 45, Bloco B",value:n.destinoComplemento,onChange:e=>Y("destinoComplemento",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoBairro",className:"text-sm font-medium text-gray-300",children:["Bairro",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"auto-preenchido"})]}),(0,t.jsx)(c.Input,{id:"destinoBairro",type:"text",placeholder:"Bairro",value:n.destinoBairro,onChange:e=>Y("destinoBairro",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoCidade",className:"text-sm font-medium text-gray-300",children:["Cidade",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"auto-preenchido"})]}),(0,t.jsx)(c.Input,{id:"destinoCidade",type:"text",placeholder:"Cidade",value:n.destinoCidade,onChange:e=>Y("destinoCidade",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"destinoEstado",className:"text-sm font-medium text-gray-300",children:["Estado",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"auto-preenchido"})]}),(0,t.jsx)(c.Input,{id:"destinoEstado",type:"text",placeholder:"UF",maxLength:2,value:n.destinoEstado,onChange:e=>Y("destinoEstado",e.target.value.toUpperCase()),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"peso",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(D.Scale,{className:"w-4 h-4 text-[#00FAFB]"}),"Peso (kg) ",(0,t.jsx)("span",{className:"text-[#FD5665]",children:"*"})]}),(0,t.jsx)(c.Input,{id:"peso",type:"number",step:"0.1",min:"0",placeholder:"0.5",value:n.peso,onChange:e=>Y("peso",e.target.value),className:(0,$.cn)("bg-white/5 border-white/10 text-white placeholder:text-gray-500","focus:border-[#00FAFB] focus:ring-[#00FAFB]/20",u.peso&&"border-[#FD5665] focus:border-[#FD5665]"),"aria-invalid":!!u.peso}),u.peso&&(0,t.jsxs)("p",{className:"text-xs text-[#FD5665] flex items-center gap-1",children:[(0,t.jsx)(T.AlertCircle,{className:"w-3 h-3"}),u.peso]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(P.Ruler,{className:"w-4 h-4 text-[#00FAFB]"}),"Dimensoes (cm)",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"opcional"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Input,{type:"number",min:"0",placeholder:"Comp.",value:n.comprimento,onChange:e=>Y("comprimento",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]","aria-label":"Comprimento"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1 block",children:"Comprimento"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Input,{type:"number",min:"0",placeholder:"Larg.",value:n.largura,onChange:e=>Y("largura",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]","aria-label":"Largura"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1 block",children:"Largura"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Input,{type:"number",min:"0",placeholder:"Alt.",value:n.altura,onChange:e=>Y("altura",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]","aria-label":"Altura"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 mt-1 block",children:"Altura"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{htmlFor:"valorDeclarado",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(L.DollarSign,{className:"w-4 h-4 text-[#00FAFB]"}),"Valor Declarado (R$)",(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal ml-1",children:"opcional"})]}),(0,t.jsx)(c.Input,{id:"valorDeclarado",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:n.valorDeclarado,onChange:e=>Y("valorDeclarado",e.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-[#00FAFB]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(I.Label,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(h.Clock,{className:"w-4 h-4 text-[#00FAFB]"}),"Urgencia"]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:q.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>Y("urgencia",e.value),className:(0,$.cn)("p-3 rounded-xl border transition-all text-left",n.urgencia===e.value?"bg-[#00FAFB]/10 border-[#00FAFB]/50 text-white":"bg-white/[0.02] border-white/[0.06] text-gray-400 hover:bg-white/[0.04] hover:border-white/10"),children:[(0,t.jsx)("span",{className:"text-sm font-medium block",children:e.label}),(0,t.jsx)("span",{className:"text-xs text-gray-500 block mt-0.5",children:e.description})]},e.value))})]}),H&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-[#FD5665]/10 border border-[#FD5665]/20 flex items-start gap-2",children:[(0,t.jsx)(T.AlertCircle,{className:"w-4 h-4 text-[#FD5665] mt-0.5 shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-[#FD5665]",children:H})]})]}),"quotes"===f&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(x.Truck,{className:"w-4 h-4"}),"Cotacoes Disponiveis (",Q.filter(e=>e.available).length,")"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-[280px] overflow-y-auto pr-1",children:Q.filter(e=>e.available).map((e,a)=>{let s=J?.carrier===e.carrier&&J?.modal===e.modal;return(0,t.jsx)("button",{type:"button",disabled:!e.available,onClick:()=>W(e),className:(0,$.cn)("w-full p-4 rounded-xl border transition-all text-left relative",e.available?s?"bg-[#00FAFB]/10 border-[#00FAFB]/50":"bg-white/[0.02] border-white/[0.06] hover:bg-white/[0.04] hover:border-white/10":"bg-white/[0.01] border-white/[0.03] opacity-50 cursor-not-allowed"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,$.cn)("w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors",s?"border-[#00FAFB] bg-[#00FAFB]":"border-white/20 bg-transparent"),children:s&&(0,t.jsx)(_.CheckCircle2,{className:"w-3 h-3 text-[#151720]"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:e.carrier}),(0,t.jsx)(d.Badge,{variant:"outline",className:"text-xs text-gray-400 border-white/10",children:e.modal})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Clock,{className:"w-3 h-3"}),e.delivery_days," dia(s)"]}),!e.available&&e.reason&&(0,t.jsx)("span",{className:"text-[#FD5665]",children:e.reason})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-white",children:z(e.price)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Entrega: ",e.delivery_date]})]})]})},`${e.carrier}-${e.modal}-${a}`)})})]}),J&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-white/[0.02] border border-white/[0.04] flex items-center gap-3",children:[(0,t.jsx)(S.Info,{className:"w-4 h-4 text-[#00FAFB] shrink-0"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Selecionado: ",(0,t.jsx)("span",{className:"text-white font-medium",children:J.carrier})," -"," ",z(J.price)," (entrega em ",J.delivery_days," dia(s))"]})]}),H&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-[#FD5665]/10 border border-[#FD5665]/20 flex items-start gap-2",children:[(0,t.jsx)(T.AlertCircle,{className:"w-4 h-4 text-[#FD5665] mt-0.5 shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-[#FD5665]",children:H})]})]}),"creating"===f&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#00FAFB]/20 to-[#2226C0]/20 flex items-center justify-center",children:(0,t.jsx)(g.Package,{className:"w-8 h-8 text-[#00FAFB]"})}),(0,t.jsx)(F.motion.div,{className:"absolute inset-0 rounded-full border-2 border-[#00FAFB]/50",animate:{scale:[1,1.2,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),(0,t.jsx)("p",{className:"text-lg font-medium text-white mt-6",children:"Criando postagem..."}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:[J?.carrier," - ",z(J?.price||0)]})]}),"creating"!==f&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-white/[0.04]",children:["quotes"===f?(0,t.jsx)(o.Button,{variant:"outline",onClick:es,disabled:G,className:"bg-transparent border-white/10 text-gray-400 hover:bg-white/5 hover:text-white",children:"Voltar"}):(0,t.jsx)("div",{}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:ea,disabled:y||G,className:"bg-transparent border-white/10 text-gray-400 hover:bg-white/5 hover:text-white",children:"Cancelar"}),"form"===f?(0,t.jsx)(o.Button,{onClick:ee,disabled:y,className:(0,$.cn)("bg-gradient-to-r from-[#00FAFB] to-[#2226C0]","text-white font-medium","hover:opacity-90 transition-opacity","disabled:opacity-50"),children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Consultando..."]}):(0,t.jsxs)(t.Fragment,{children:["Consultar Cotacoes",(0,t.jsx)(E.ChevronRight,{className:"w-4 h-4 ml-1"})]})}):(0,t.jsx)(o.Button,{onClick:et,disabled:!J||G,className:(0,$.cn)("bg-gradient-to-r from-[#00FAFB] to-[#2226C0]","text-white font-medium","hover:opacity-90 transition-opacity","disabled:opacity-50"),children:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Truck,{className:"w-4 h-4 mr-2"}),"Criar Postagem"]})})]})]})]})})]})})})}var U=e.i(84033),H=e.i(10307),K=e.i(15682),Q=e.i(14346),V=e.i(54267),X=e.i(74117);let J=e=>{if(!e||""===e)return"—";try{return new Date(e).toLocaleDateString("pt-BR")}catch{return"—"}};function W({order:e,onClose:s,onMoveToNextStatus:r,isUpdating:i=!1}){let l=(0,a.useCallback)(()=>{e?.trackingCode&&(navigator.clipboard.writeText(e.trackingCode),(0,X.toast)({title:"Codigo copiado!"}))},[e]),n=(0,a.useCallback)(()=>{e?.trackingCode&&window.open(`https://rastreamento.correios.com.br/app/index.php?objeto=${e.trackingCode}`,"_blank")},[e]),c=(0,a.useCallback)(()=>{e&&r&&(r(e.id,e.status),s())},[e,r,s]),m=e?(e=>{switch(e){case"aguardando":return{label:"Aguardando",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"};case"em_transito":return{label:"Em Transito",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"};case"entregue":return{label:"Entregue",className:"bg-green-500/20 text-green-400 border-green-500/30"};case"cancelado":return{label:"Cancelado",className:"bg-red-500/20 text-red-400 border-red-500/30"};default:return{label:e,className:"bg-gray-500/20 text-gray-400"}}})(e.status):null;return(0,t.jsx)(k.Root,{open:!!e,onOpenChange:e=>!e&&s(),children:(0,t.jsx)(B.AnimatePresence,{children:e&&(0,t.jsxs)(k.Portal,{forceMount:!0,children:[(0,t.jsx)(k.Overlay,{asChild:!0,children:(0,t.jsx)(F.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-[#151720]/85 backdrop-blur-[24px]"})}),(0,t.jsx)(k.Content,{asChild:!0,children:(0,t.jsxs)(F.motion.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.2,ease:"easeOut"},className:(0,$.cn)("fixed left-1/2 top-1/2 z-50 w-full max-w-[480px] -translate-x-1/2 -translate-y-1/2","bg-[#1a1d28]/90 backdrop-blur-xl","border border-white/[0.06] rounded-2xl shadow-2xl","p-6 max-h-[90vh] overflow-y-auto"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)(k.Title,{className:"text-xl font-semibold text-white flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-[#960A9C]/20 to-[#2226C0]/20 border border-white/[0.04]",children:(0,t.jsx)(g.Package,{className:"w-5 h-5 text-[#00FAFB]"})}),"Detalhes da Postagem"]}),(0,t.jsx)(k.Close,{asChild:!0,children:(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-white/5 transition-colors","aria-label":"Fechar",children:(0,t.jsx)(A.X,{className:"w-5 h-5 text-gray-400"})})})]}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-white",children:e.codigo}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id.slice(0,8),"..."]})]}),m&&(0,t.jsx)(d.Badge,{className:(0,$.cn)("border",m.className),children:m.label})]}),e.trackingCode&&(0,t.jsx)("div",{className:"p-4 rounded-xl bg-gradient-to-br from-[#00FAFB]/5 to-transparent border border-[#00FAFB]/20",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Hash,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Codigo de Rastreio"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-mono font-medium text-white",children:e.trackingCode}),(0,t.jsx)("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors",title:"Copiar",children:(0,t.jsx)(H.Copy,{className:"w-4 h-4 text-gray-400"})}),(0,t.jsx)("button",{onClick:n,className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors",title:"Rastrear",children:(0,t.jsx)(K.ExternalLink,{className:"w-4 h-4 text-gray-400"})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(x.Truck,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Transportadora"})]}),(0,t.jsx)("p",{className:"font-medium text-white",children:e.carrier||"Correios"})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(L.DollarSign,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Valor do Frete"})]}),(0,t.jsxs)("p",{className:"font-medium text-white",children:["R$ ",e.price?.toFixed(2)||"0.00"]})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(p.MapPin,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Destinatario"})]}),(0,t.jsx)("p",{className:"font-medium text-white",children:e.destino.nome}),e.destino.cep&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["CEP: ",e.destino.cep]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(j.Calendar,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Criado em"})]}),(0,t.jsx)("p",{className:"font-medium text-white",children:J(e.dataCriacao)})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(j.Calendar,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Previsao"})]}),(0,t.jsx)("p",{className:"font-medium text-white",children:J(e.dataPrevista)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.AlertCircle,{className:"w-4 h-4 text-[#00FAFB]"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Prioridade"})]}),(0,t.jsx)(d.Badge,{className:(0,$.cn)("border","urgent"===e.prioridade?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"),children:"urgent"===e.prioridade?"Urgente":"Normal"})]}),"entregue"!==e.status&&"cancelado"!==e.status&&r&&(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(o.Button,{className:(0,$.cn)("w-full h-12 rounded-xl font-medium","bg-gradient-to-r from-[#960A9C] to-[#2226C0]","hover:from-[#a00ba6] hover:to-[#2830d4]","transition-all duration-200"),onClick:c,disabled:i,children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"w-4 h-4 animate-spin mr-2"}),"Atualizando..."]}):"aguardando"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Play,{className:"w-4 h-4 mr-2"}),"Mover para Em Transito"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V.Check,{className:"w-4 h-4 mr-2"}),"Marcar como Entregue"]})})})]})]})})]})})})}let Y=["postages"],Z=["tiflux-tickets-expedicao"];function ee(e){return{id:e.posting_id,codigo:e.order_code,cliente:e.destination.name,destino:{nome:e.destination.name,cep:e.destination.cep},status:e.status,prioridade:(e.urgency||"normal").toLowerCase(),responsavel:{nome:"Usuario"},itens:[],dataCriacao:e.created_at,dataPrevista:e.estimated_delivery,carrier:e.carrier,trackingCode:e.tracking_code,price:e.price}}function et(){let e=(0,i.useQueryClient)(),[k,B]=(0,a.useState)("pendentes"),[A,D]=(0,a.useState)(""),[P,L]=(0,a.useState)(!1),[T,E]=(0,a.useState)(null),[_,S]=(0,a.useState)(null),{data:R,isLoading:I,refetch:$}=(0,s.useQuery)({queryKey:Z,queryFn:async()=>(await (0,M.getTifluxTicketsForExpedicao)()).data}),{data:q,isLoading:O,refetch:z}=(0,s.useQuery)({queryKey:Y,queryFn:async()=>{let e=await (0,M.getPostages)();return e.data.success?e.data.postings.map(ee):[]}}),U=(0,r.useMutation)({mutationFn:async({postingId:e,newStatus:t})=>{let a=await (0,M.updatePostageStatus)(e,t);if(!a.data.success)throw Error(a.data.error||"Failed to update status");return a.data.posting},onSuccess:(t,{newStatus:a})=>{e.invalidateQueries({queryKey:Y}),(0,X.toast)({title:`Status atualizado para "${"em_transito"===a?"Em Transito":"Entregue"}"`,description:`Pedido: ${t.order_code}`})},onError:e=>{(0,X.toast)({title:"Erro ao atualizar status",description:e instanceof Error?e.message:"Tente novamente",variant:"destructive"})}}),H=e=>{if(!A.trim())return e;let t=A.toLowerCase();return e.filter(e=>e.codigo?.toLowerCase().includes(t)||e.cliente?.toLowerCase().includes(t)||e.trackingCode?.toLowerCase().includes(t))},K=(e=>{if(!A.trim())return e;let t=A.toLowerCase();return e.filter(e=>String(e.ticket_number).includes(t)||e.client_name?.toLowerCase().includes(t)||e.stage?.toLowerCase().includes(t))})(R?.tickets||[]),Q=H((q||[]).filter(e=>"aguardando"===e.status||"em_transito"===e.status)),V=H((q||[]).filter(e=>"entregue"===e.status)),J=(0,a.useCallback)(e=>{S(e),L(!0)},[]),et=(0,a.useCallback)(e=>{E(e)},[]),ea=(0,a.useCallback)(t=>{e.invalidateQueries({queryKey:Y}),e.invalidateQueries({queryKey:Z}),S(null),(0,X.toast)({title:"Postagem criada com sucesso!",description:`Codigo: ${t.codigo}${t.trackingCode?` | Rastreio: ${t.trackingCode}`:""}`})},[e]),es=(0,a.useCallback)((e,t)=>{let a={aguardando:"em_transito",em_transito:"entregue",entregue:"entregue",cancelado:"cancelado"}[t];a!==t&&U.mutate({postingId:e,newStatus:a})},[U]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(n.AssetManagementHeader,{title:"Expedicao",subtitle:"Gerencie ordens de envio e entregas",primaryAction:{label:"Atualizar",onClick:()=>{"pendentes"===k?$():z()},icon:(0,t.jsx)(v.RefreshCw,{className:"w-4 h-4"})},secondaryActions:[{label:"Transportadoras",href:"/ferramentas/ativos/transportadoras",icon:(0,t.jsx)(x.Truck,{className:"w-4 h-4"})}]}),(0,t.jsx)(l.GlassCard,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-muted"}),(0,t.jsx)(c.Input,{placeholder:"Buscar por ticket, cliente ou codigo...",value:A,onChange:e=>D(e.target.value),className:"pl-10 bg-white/5 border-border"})]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",className:"border-border",children:[(0,t.jsx)(w.Filter,{className:"w-4 h-4 mr-2"}),"Filtros"]})]})}),(0,t.jsx)(l.GlassCard,{children:(0,t.jsxs)(m.Tabs,{value:k,onValueChange:B,className:"w-full",children:[(0,t.jsxs)(m.TabsList,{className:"grid w-full grid-cols-3 bg-white/5",children:[(0,t.jsxs)(m.TabsTrigger,{value:"pendentes",className:"data-[state=active]:bg-orange-500/20",children:["Pendentes",K.length>0&&(0,t.jsx)(d.Badge,{variant:"outline",className:"ml-2",children:K.length})]}),(0,t.jsxs)(m.TabsTrigger,{value:"andamento",className:"data-[state=active]:bg-blue-500/20",children:["Em Andamento",Q.length>0&&(0,t.jsx)(d.Badge,{variant:"outline",className:"ml-2",children:Q.length})]}),(0,t.jsxs)(m.TabsTrigger,{value:"concluidas",className:"data-[state=active]:bg-green-500/20",children:["Concluidas",V.length>0&&(0,t.jsx)(d.Badge,{variant:"outline",className:"ml-2",children:V.length})]})]}),(0,t.jsxs)(m.TabsContent,{value:"pendentes",className:"mt-6",children:[(0,t.jsx)(l.GlassCardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Clock,{className:"w-4 h-4 text-orange-400"}),(0,t.jsx)(l.GlassCardTitle,{children:"Tickets Pendentes"})]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>$(),disabled:I,className:"border-border",children:(0,t.jsx)(v.RefreshCw,{className:`w-4 h-4 ${I?"animate-spin":""}`})})]})}),(0,t.jsx)(l.GlassCardContent,{children:I?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(N.Loader2,{className:"w-8 h-8 text-orange-400 animate-spin"})}):K.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map((e,a)=>(0,t.jsxs)(F.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"bg-white/5 border border-border rounded-lg p-4 hover:bg-white/10 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-orange-400",children:["#",e.ticket_number]}),(0,t.jsx)(d.Badge,{variant:"outline",className:"text-xs",children:e.stage})]}),e.client_name&&(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary truncate mb-1",title:e.client_name,children:e.client_name.length>35?`${e.client_name.substring(0,35)}...`:e.client_name}),e.title&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted mb-3",children:[(0,t.jsx)(y.FileText,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{className:"truncate",title:e.title,children:e.title.length>30?`${e.title.substring(0,30)}...`:e.title})]}),(0,t.jsx)("div",{className:"border-t border-border/50 pt-3 mt-2 space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(j.Calendar,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleDateString("pt-BR")})]})}),(0,t.jsxs)(o.Button,{variant:"default",size:"sm",className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>J(e),children:[(0,t.jsx)(C,{className:"w-4 h-4 mr-2"}),"Realizar Cotacao"]})]},e.ticket_number))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(b.InboxIcon,{className:"w-12 h-12 text-text-muted mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Nenhum ticket pendente"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:'Tickets do Tiflux com estagio "Enviado/Enviar Logistica" aparecerao aqui'})]})})]}),(0,t.jsxs)(m.TabsContent,{value:"andamento",className:"mt-6",children:[(0,t.jsx)(l.GlassCardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Truck,{className:"w-4 h-4 text-blue-400"}),(0,t.jsx)(l.GlassCardTitle,{children:"Postagens em Andamento"})]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>z(),disabled:O,className:"border-border",children:(0,t.jsx)(v.RefreshCw,{className:`w-4 h-4 ${O?"animate-spin":""}`})})]})}),(0,t.jsx)(l.GlassCardContent,{children:O?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(N.Loader2,{className:"w-8 h-8 text-blue-400 animate-spin"})}):Q.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map((e,a)=>(0,t.jsxs)(F.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},onClick:()=>et(e),className:"bg-white/5 border border-border rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-blue-400",children:e.codigo}),(0,t.jsx)(d.Badge,{variant:"outline",className:`text-xs ${"em_transito"===e.status?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:"em_transito"===e.status?"Em Transito":"Aguardando"})]}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary truncate mb-1",title:e.cliente,children:e.cliente.length>35?`${e.cliente.substring(0,35)}...`:e.cliente}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted mb-3",children:[(0,t.jsx)(x.Truck,{className:"w-3 h-3 shrink-0"}),(0,t.jsxs)("span",{children:[e.carrier||"Correios"," - R$ ",e.price?.toFixed(2)||"0.00"]})]}),(0,t.jsxs)("div",{className:"border-t border-border/50 pt-3 mt-2 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(p.MapPin,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.destino.nome})]}),e.trackingCode&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(g.Package,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{className:"font-mono",children:e.trackingCode})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(j.Calendar,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{children:e.dataPrevista&&""!==e.dataPrevista?new Date(e.dataPrevista).toLocaleDateString("pt-BR"):e.dataCriacao?new Date(e.dataCriacao).toLocaleDateString("pt-BR"):"—"})]})]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",className:"w-full mt-4 border-border",onClick:t=>{t.stopPropagation(),es(e.id,e.status)},disabled:U.isPending,children:U.isPending?(0,t.jsx)(N.Loader2,{className:"w-4 h-4 animate-spin"}):"aguardando"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Truck,{className:"w-4 h-4 mr-2"}),"Marcar Em Transito"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 mr-2"}),"Marcar Entregue"]})})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(b.InboxIcon,{className:"w-12 h-12 text-text-muted mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Nenhuma postagem em andamento"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:"Postagens criadas e em transito aparecerao aqui"})]})})]}),(0,t.jsxs)(m.TabsContent,{value:"concluidas",className:"mt-6",children:[(0,t.jsx)(l.GlassCardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4 text-green-400"}),(0,t.jsx)(l.GlassCardTitle,{children:"Postagens Concluidas"})]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>z(),disabled:O,className:"border-border",children:(0,t.jsx)(v.RefreshCw,{className:`w-4 h-4 ${O?"animate-spin":""}`})})]})}),(0,t.jsx)(l.GlassCardContent,{children:O?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(N.Loader2,{className:"w-8 h-8 text-green-400 animate-spin"})}):V.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map((e,a)=>(0,t.jsxs)(F.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},onClick:()=>et(e),className:"bg-white/5 border border-border rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-green-400",children:e.codigo}),(0,t.jsx)(d.Badge,{variant:"outline",className:"text-xs bg-green-500/20 text-green-400",children:"Entregue"})]}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary truncate mb-1",title:e.cliente,children:e.cliente.length>35?`${e.cliente.substring(0,35)}...`:e.cliente}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted mb-3",children:[(0,t.jsx)(x.Truck,{className:"w-3 h-3 shrink-0"}),(0,t.jsxs)("span",{children:[e.carrier||"Correios"," - R$ ",e.price?.toFixed(2)||"0.00"]})]}),(0,t.jsxs)("div",{className:"border-t border-border/50 pt-3 mt-2 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(p.MapPin,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.destino.nome})]}),e.trackingCode&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(g.Package,{className:"w-3 h-3 shrink-0"}),(0,t.jsx)("span",{className:"font-mono",children:e.trackingCode})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(j.Calendar,{className:"w-3 h-3 shrink-0"}),(0,t.jsxs)("span",{children:["Entregue em ",e.dataPrevista&&""!==e.dataPrevista?new Date(e.dataPrevista).toLocaleDateString("pt-BR"):new Date(e.dataCriacao).toLocaleDateString("pt-BR")]})]})]})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(b.InboxIcon,{className:"w-12 h-12 text-text-muted mb-3"}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-primary mb-1",children:"Nenhuma postagem concluida"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:"Postagens entregues aparecerao aqui"})]})})]})]})}),(0,t.jsx)(G,{open:P,onOpenChange:e=>{L(e),e||S(null)},onOrderCreated:ea,tifluxTicket:_}),(0,t.jsx)(W,{order:T,onClose:()=>E(null),onMoveToNextStatus:es,isUpdating:U.isPending})]})}e.s(["default",()=>et],51182)}]);