(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64583,e=>{"use strict";var t=e.i(71005),a=e.i(31993);let n=(0,e.i(44621).createAgentCoreService)({arn:t.SGA_AGENTCORE_ARN,sessionStorageKey:a.SGA_STORAGE_KEYS.AGENTCORE_SESSION,logPrefix:"[SGA AgentCore]",sessionPrefix:"sga-session"});async function r(e,t){let a=await n.invoke(e,t),r=function(e){let t,a=e;if(a&&"object"==typeof a&&"content"in a&&Array.isArray(a.content)){let e,t=a,n=t.content?.[0];if(n&&("text"in n&&"string"==typeof n.text?e=n.text:"type"in n&&"tool_result"===n.type&&"string"==typeof n.content?e=n.content:"content"in n&&"string"==typeof n.content&&(e=n.content)),e)try{let t,n,r=(n=(t=e.trim()).match(/^```(?:json)?\s*\n?([\s\S]*?)\n?```$/))?n[1].trim():t;a=JSON.parse(r)}catch(t){return console.error("[AgentCore] BUG-039v2: JSON parse failed:",t,e.slice(0,200)),{data:e}}else n&&console.warn("[AgentCore] BUG-039v2: Unexpected content format, could not extract JSON:",JSON.stringify(n).slice(0,300))}if(a&&"object"==typeof a&&"specialist_agent"in a&&"response"in a){let e=a;if(e.debug_analysis&&(t=e.debug_analysis),e.response){let a=e.response;return a.debug_analysis&&!t&&(t=a.debug_analysis),{data:e.response,debug_analysis:t}}}return a&&"object"==typeof a&&"debug_analysis"in a&&(t=a.debug_analysis),{data:a,debug_analysis:t}}(a.data);return{data:r.data,sessionId:a.sessionId,debug_analysis:r.debug_analysis}}let s=n.getSessionId,o=n.clearSession,i=n.getConfig;async function c(){return r({action:"debug_version"})}async function u(e){return r({action:"search_assets",...e})}async function l(e){return r({action:"get_balance",...e})}async function d(e){return r({action:"where_is_serial",...e})}async function _(e){return r({action:"process_nf_upload",...e})}async function f(e){return r({action:"confirm_nf_entry",...e})}async function p(e){return r({action:"get_nf_upload_url",...e})}async function g(){return r({action:"get_pending_nf_entries"})}async function m(e,t){return r({action:"assign_project_to_entry",entry_id:e,project_id:t})}async function y(e){return r({action:"create_reservation",...e})}async function S(e){return r({action:"cancel_reservation",...e})}async function E(e){return r({action:"process_expedition",...e})}async function b(e){return r({action:"create_transfer",...e})}async function v(e){return r({action:"process_return",...e})}async function A(){return r({action:"pending_reversals"})}async function h(e){return r({action:"get_pending_tasks",...e})}async function C(e){return r({action:"approve_task",...e})}async function T(e){return r({action:"reject_task",...e})}async function w(e){return r({action:"start_inventory_count",...e})}async function I(e){return r({action:"submit_count_result",...e})}async function R(e){return r({action:"analyze_divergences",campaign_id:e})}async function k(e){return r({action:"propose_adjustment",...e})}async function N(){return r({action:"get_active_campaigns"})}async function O(e){return r({action:"validate_operation",...e})}async function x(e){return r({action:"chat",question:e.question,context:e.context||{},conversation_history:e.conversation_history||[]})}async function P(){return r({action:"get_dashboard_summary"})}async function L(){return r({action:"get_part_numbers"})}async function M(){return r({action:"get_locations"})}async function G(){return r({action:"get_projects"})}async function D(e){return r({action:"create_part_number",...e})}async function q(e){return r({action:"create_location",...e})}async function j(e){return r({action:"create_project",...e})}async function U(e,t){return r({action:"get_evidence_upload_url",filename:e,content_type:t})}async function F(e){return r({action:"preview_import",...e})}async function B(e){return r({action:"execute_import",...e})}async function $(e){let t=`Execute NEXO import processing for file: ${e.filename} with confirmed column mappings`,a=await r({action:"nexo_execute_import",prompt:t,...e}),n=a.data;return n&&"object"==typeof n&&"job_id"in n&&"status"in n?{...a,data:{is_async:!0,job:n}}:{...a,data:{is_async:!1,result:n}}}async function V(e){return r({action:"validate_pn_mapping",...e})}async function z(e){return r({action:"process_expedition_request",...e})}async function J(e){return r({action:"verify_expedition_stock",...e})}async function Y(e){return r({action:"confirm_separation",...e})}async function K(e){return r({action:"complete_expedition",...e})}async function H(e){return r({action:"get_shipping_quotes",...e},{useSession:!1})}async function Q(e){return r({action:"recommend_carrier",...e})}async function W(e){return r({action:"track_shipment",...e})}async function X(e){return r({action:"create_postage",...e},{useSession:!1})}async function Z(e){return r({action:"get_postages",...e&&{status:e}},{useSession:!1})}async function ee(e,t){return r({action:"update_postage_status",posting_id:e,new_status:t},{useSession:!1})}async function et(e){return r({action:"process_return",...e})}async function ea(e){return r({action:"validate_return_origin",...e})}async function en(e){return r({action:"evaluate_return_condition",...e})}async function er(e={}){return r({action:"get_accuracy_metrics",...e})}async function es(e){return r({action:"reconcile_sap_export",...e})}async function eo(e){return r({action:"apply_reconciliation_action",delta_id:e.delta_id,reconciliation_action:e.action,reason:e.reason})}async function ei(e){return r({action:"process_image_ocr",s3_key:e.s3_key,project_id:e.project_id,destination_location_id:e.destination_location_id,file_type:"image"})}async function ec(e){return r({action:"preview_sap_import",...e})}async function eu(e){return r({action:"execute_sap_import",...e})}async function el(e){return r({action:"create_manual_entry",...e})}async function ed(e){return r({action:"smart_import_upload",s3_key:e.s3_key,filename:e.filename,content_type:e.content_type,project_id:e.project_id,destination_location_id:e.destination_location_id})}async function e_(e){return r({action:"nexo_analyze_file",prompt:`Analyze the uploaded inventory file and provide column mappings.

File: ${e.filename}
S3 Key: ${e.s3_key}
Content Type: ${e.content_type||"auto-detect"}
${e.prior_knowledge?"Prior knowledge available from previous imports.":""}

Please:
1. Use get_file_structure tool to analyze the file structure (columns, sample rows, format)
2. Map each column to inventory schema fields (codigo_produto, descricao, quantidade, etc.)
3. Generate questions for uncertain mappings (confidence < 0.8)
4. Return full NexoAnalyzeFileResponse with reasoning trace`,s3_key:e.s3_key,filename:e.filename,content_type:e.content_type,prior_knowledge:e.prior_knowledge})}async function ef(e){return r({action:"nexo_get_questions",prompt:"Get clarification questions for import session based on current analysis state",session_state:e.session_state})}async function ep(e){return r({action:"nexo_submit_answers",prompt:"Process user answers for import clarification questions and refine column mappings",session_state:e.session_state,answers:e.answers,...e.user_feedback?{user_feedback:e.user_feedback}:{}})}async function eg(e){return r({action:"nexo_learn_from_import",prompt:"Learn from completed import: store successful patterns and corrections for future improvements",session_state:e.session_state,import_result:e.import_result,user_corrections:e.user_corrections})}async function em(e){return r({action:"nexo_prepare_processing",prompt:"Prepare final processing configuration for import execution with confirmed mappings",session_state:e.session_state})}async function ey(e){return r({action:"nexo_get_prior_knowledge",prompt:`Retrieve prior knowledge and historical patterns for file import: ${e.filename}`,filename:e.filename,file_analysis:e.file_analysis})}async function eS(e){return r({action:"nexo_get_adaptive_threshold",prompt:`Calculate adaptive confidence threshold for file: ${e.filename}`,filename:e.filename,detected_type:e.detected_type})}async function eE(e,t){return r({action:"generate_import_observations",preview:{source_type:e.source_type,items_count:"items"in e&&Array.isArray(e.items)?e.items.length:0,total_value:"total_value"in e?e.total_value:void 0,supplier_name:"supplier"in e&&"object"==typeof e.supplier&&null!==e.supplier?e.supplier.name:void 0,nf_number:"nf_number"in e?e.nf_number:void 0,validation_warnings:"warnings"in e&&Array.isArray(e.warnings)?e.warnings:[],hil_required:"hil_required"in e?e.hil_required:void 0},context:t})}async function eb(e){return r({action:"research_equipment",part_number:e.part_number,description:e.description,serial_number:e.serial_number,manufacturer:e.manufacturer,additional_info:e.additional_info})}async function ev(e){return r({action:"research_equipment_batch",equipment_list:e})}async function eA(e){return r({action:"get_research_status",part_number:e})}async function eh(e){return r({action:"query_equipment_docs",query:e.query,part_number:e.part_number,max_results:e.max_results??5})}async function eC(){return r({action:"list_carriers"},{useSession:!1})}async function eT(e){return r({action:"preview_carrier_csv",csv_content:e.csv_content,carrier_name:e.carrier_name},{useSession:!1})}async function ew(e){return r({action:"ingest_carrier_csv",csv_content:e.csv_content,carrier_name:e.carrier_name,...e.schema_override&&{schema_override:e.schema_override}},{useSession:!1})}async function eI(e){return r({action:"record_debug_action",debug_action:e.action,error_signature:e.error_signature,error_type:e.error_type,suggested_action:e.suggested_action,debug_analysis:e.debug_analysis},{useSession:!0})}async function eR(e,t){return console.info("[AgentRoom] Admin accessed Control Room",{timestamp:new Date().toISOString()}),r({action:"get_agent_room",...e?.session_id&&{session_id:e.session_id}},{useSession:!0,signal:t?.signal})}e.s(["analyzeDivergences",()=>R,"applyReconciliationAction",()=>eo,"approveTask",()=>C,"assignProjectToEntry",()=>m,"cancelReservation",()=>S,"clearSGASession",0,o,"completeExpedition",()=>K,"confirmNFEntry",()=>f,"confirmSeparation",()=>Y,"createLocation",()=>q,"createManualEntry",()=>el,"createPartNumber",()=>D,"createPostage",()=>X,"createProject",()=>j,"createReservation",()=>y,"createTransfer",()=>b,"debugVersion",()=>c,"evaluateReturnCondition",()=>en,"executeImport",()=>B,"executeNexoImport",()=>$,"executeSAPImport",()=>eu,"generateImportObservations",()=>eE,"getAccuracyMetrics",()=>er,"getActiveCampaigns",()=>N,"getAgentRoomData",()=>eR,"getBalance",()=>l,"getDashboardSummary",()=>P,"getEvidenceUploadUrl",()=>U,"getLocations",()=>M,"getNFUploadUrl",()=>p,"getPartNumbers",()=>L,"getPendingNFEntries",()=>g,"getPendingReversals",()=>A,"getPendingTasks",()=>h,"getPostages",()=>Z,"getProjects",()=>G,"getResearchStatus",()=>eA,"getSGAAgentCoreConfig",0,i,"getSGASessionId",0,s,"getShippingQuotes",()=>H,"ingestCarrierCsv",()=>ew,"invokeSGAAgentCore",()=>r,"invokeSmartImport",()=>ed,"listCarriers",()=>eC,"nexoAnalyzeFile",()=>e_,"nexoEstoqueChat",()=>x,"nexoGetAdaptiveThreshold",()=>eS,"nexoGetPriorKnowledge",()=>ey,"nexoGetQuestions",()=>ef,"nexoLearnFromImport",()=>eg,"nexoPrepareProcessing",()=>em,"nexoSubmitAnswers",()=>ep,"previewCarrierCsv",()=>eT,"previewImport",()=>F,"previewSAPImport",()=>ec,"processExpedition",()=>E,"processExpeditionRequest",()=>z,"processImageOCR",()=>ei,"processNFUpload",()=>_,"processReturn",()=>v,"processReturnNew",()=>et,"proposeAdjustment",()=>k,"queryEquipmentDocs",()=>eh,"recommendCarrier",()=>Q,"reconcileSAPExport",()=>es,"recordDebugAction",()=>eI,"rejectTask",()=>T,"researchEquipment",()=>eb,"researchEquipmentBatch",()=>ev,"searchAssets",()=>u,"startCampaign",()=>w,"submitCount",()=>I,"trackShipment",()=>W,"updatePostageStatus",()=>ee,"validateOperation",()=>O,"validatePNMapping",()=>V,"validateReturnOrigin",()=>ea,"verifyExpeditionStock",()=>J,"whereIsSerial",()=>d])},49202,e=>{"use strict";let t=(0,e.i(98631).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],49202)},51946,e=>{"use strict";let t=(0,e.i(98631).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],51946)},27700,e=>{"use strict";let t=(0,e.i(98631).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],27700)},71005,62224,44621,e=>{"use strict";var t=e.i(6975);let a="377311924364",n="us-east-2",r=t.default.env.NEXT_PUBLIC_AGENTCORE_ENDPOINT||`https://bedrock-agentcore.${n}.amazonaws.com`,s={academy:"faiston_academy_agents-ODNvP6HxCD",sga:"faiston_inventory_orchestration-TOk9YDGFSo",carrier:"faiston_carrier_orchestration-kn4vaP2h89",portal:"faiston_portal_agents-PENDING"};function o(e){return`arn:aws:bedrock-agentcore:${n}:${a}:runtime/${e}`}let i=t.default.env.NEXT_PUBLIC_ACADEMY_AGENTCORE_ARN||o(s.academy),c=t.default.env.NEXT_PUBLIC_SGA_AGENTCORE_ARN||o(s.sga),u=t.default.env.NEXT_PUBLIC_CARRIER_AGENTCORE_ARN||o(s.carrier),l=t.default.env.NEXT_PUBLIC_PORTAL_AGENTCORE_ARN||o(s.portal),d=t.default.env.NEXT_PUBLIC_AGENTROOM_WEBSOCKET_URL||"wss://wts0zmjxv5.execute-api.us-east-2.amazonaws.com/production";e.s(["AGENTCORE_ENDPOINT",0,r,"CARRIER_AGENTCORE_ARN",0,u,"PORTAL_AGENTCORE_ARN",0,l,"SGA_AGENTCORE_ARN",0,c,"agentCoreConfig",0,{endpoint:r,region:n,accountId:a,arns:{academy:i,sga:c,carrier:u,portal:l},runtimeIds:s,websocket:{agentRoom:d}}],71005);var _=e.i(69049);function f(e){if(!e||"object"!=typeof e)return e;if(e&&"object"==typeof e&&"specialist_agent"in e&&"response"in e){let t=e.response;return e.debug_analysis&&(t.debug_analysis=e.debug_analysis),t}return e}function p(e,t=5){if(t<=0)return"string"==typeof e?e:"Erro desconhecido";if("string"==typeof e){if(e.startsWith('"')&&e.endsWith('"'))try{let a=JSON.parse(e);if("string"==typeof a)return p(a,t-1)}catch{}let a="string"==typeof e?e.trim():"";return"success"===a||'"success"'===a||"'success'"===a?(console.warn('[BUG-022 v10] Detected "success" as error value - semantic mismatch:',e),"Erro interno: resposta malformada do servidor"):e}if(e&&"object"==typeof e){if("error"in e)return p(e.error,t-1);if("message"in e)return p(e.message,t-1)}return"Erro desconhecido"}e.s(["extractAgentResponse",()=>f,"safeExtractErrorMessage",()=>p],62224);class g extends Error{debug_analysis;status;originalResponse;constructor(e,t){super(e),this.name="AgentCoreError",this.debug_analysis=t?.debug_analysis,this.status=t?.status,this.originalResponse=t?.originalResponse}}let m=[502,503,504];function y(e){return new Promise(t=>setTimeout(t,e))}async function S(e){let t=e.body?.getReader();if(!t)throw Error("No response body for streaming");let a=new TextDecoder,n=[];for(;;){let{done:e,value:r}=await t.read();if(e)break;for(let e of a.decode(r,{stream:!0}).split("\n"))if(e.startsWith("data: ")){let t=e.slice(6);t&&"[DONE]"!==t&&n.push(t)}}let r=n.join("");try{return JSON.parse(r)}catch{return r}}function E(e){let t=function(e){let t=e.sessionPrefix||"session";function a(){return`${t}-${crypto.randomUUID().replace(/-/g,"")}`}return{generateSessionId:a,getSessionId:function(){try{let t=sessionStorage.getItem(e.sessionStorageKey);return t||(t=a(),sessionStorage.setItem(e.sessionStorageKey,t)),t}catch{return a()}},clearSession:function(){try{sessionStorage.removeItem(e.sessionStorageKey)}catch{}}}}(e);return{invoke:async function a(n,s=!0){let{useSession:o=!0,signal:i}="boolean"==typeof s?{useSession:s}:s,c=await (0,_.ensureValidAccessToken)();if(!c)throw Error("Nao autenticado. Por favor, faca login novamente.");let u=encodeURIComponent(e.arn),l=`${r}/runtimes/${u}/invocations?qualifier=DEFAULT`,d=o?t.getSessionId():t.generateSessionId(),f=null;for(let t=0;t<=3;t++)try{let a=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json","X-Amzn-Bedrock-AgentCore-Runtime-Session-Id":d},body:JSON.stringify(n),signal:i});if(!a.ok){let n,r,s=await a.text(),o=`AgentCore error: ${a.status} ${a.statusText}`;try{let e=JSON.parse(s);r=e,e.debug_analysis&&"object"==typeof e.debug_analysis&&(n=e.debug_analysis,console.log("[AgentCoreBase] BUG-027: Extracted debug_analysis from error response"));let t=e.message||e.Message||e.error;o=t?p(t):o}catch{s&&(o=p(s))}if(401===a.status)throw new g("Sessao expirada. Por favor, faca login novamente.",{status:401,debug_analysis:n});if(403===a.status)throw new g("Acesso negado. Verifique suas permissoes.",{status:403,debug_analysis:n});if(m.includes(a.status)&&t<3){let s=3e3*Math.pow(2,t);console.warn(`${e.logPrefix} Received ${a.status}, retrying in ${s}ms...`),f=new g(o,{status:a.status,debug_analysis:n,originalResponse:r}),await y(s);continue}throw new g(o,{status:a.status,debug_analysis:n,originalResponse:r})}let r=a.headers.get("content-type")||"";if(r.includes("text/event-stream"))return{data:await S(a),sessionId:d};if(r.includes("application/json"))return{data:await a.json(),sessionId:d};let s=await a.text();try{return{data:JSON.parse(s),sessionId:d}}catch{return{data:s,sessionId:d}}}catch(a){if(a instanceof Error&&"AbortError"===a.name)throw a;if(f=a instanceof Error?a:Error(String(a)),t<3){let n=3e3*Math.pow(2,t);console.warn(`${e.logPrefix} Error, retrying in ${n}ms...`,a),await y(n);continue}}throw f||Error("AgentCore request failed after all retries")},getSessionId:t.getSessionId,clearSession:t.clearSession,getConfig:function(){return{endpoint:r,arn:e.arn,configured:!!e.arn}}}}e.s(["AgentCoreError",()=>g,"createAgentCoreService",()=>E],44621)},23145,e=>{"use strict";let t=(0,e.i(98631).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],23145)},48162,e=>{"use strict";let t=(0,e.i(98631).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],48162)},74515,e=>{"use strict";let t=(0,e.i(98631).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],74515)},31993,e=>{"use strict";var t=e.i(7178),a=e.i(9020),n=e.i(27700),r=e.i(48162),s=e.i(51946),o=e.i(49202),i=e.i(74515),c=e.i(23145);let u=[{id:"dashboard",label:"Dashboards",labelShort:"Dash",href:"/ferramentas/ativos/dashboard",icon:t.LayoutDashboard},{id:"estoque",label:"Estoque",labelShort:"Estoque",href:"/ferramentas/ativos/estoque",icon:a.Package},{id:"expedicao",label:"Expedição",labelShort:"Exped.",href:"/ferramentas/ativos/expedicao",icon:n.Truck},{id:"reversa",label:"Reversa e Rastreabilidade",labelShort:"Reversa",href:"/ferramentas/ativos/reversa",icon:r.RotateCcw},{id:"tracking",label:"Tracking e Logística",labelShort:"Tracking",href:"/ferramentas/ativos/tracking",icon:s.MapPin},{id:"fiscal",label:"Fiscal e Contábil",labelShort:"Fiscal",href:"/ferramentas/ativos/fiscal",icon:o.FileText},{id:"wiki",label:"Wiki",labelShort:"Wiki",href:"/ferramentas/ativos/wiki",icon:i.BookOpen},{id:"agent-room",label:"Agent Control Room",labelShort:"Agents",href:"/ferramentas/ativos/agent-room",icon:c.Eye}];function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}e.s(["ASSET_NAV_MODULES",0,u,"CAMPAIGN_STATUS_COLORS",0,{DRAFT:"bg-zinc-500/20 text-zinc-400",ACTIVE:"bg-blue-500/20 text-blue-400",ANALYSIS:"bg-yellow-500/20 text-yellow-400",COMPLETED:"bg-green-500/20 text-green-400",CANCELLED:"bg-red-500/20 text-red-400"},"CAMPAIGN_STATUS_LABELS",0,{DRAFT:"Rascunho",ACTIVE:"Em Andamento",ANALYSIS:"Em Analise",COMPLETED:"Concluido",CANCELLED:"Cancelado"},"DIVERGENCE_TYPE_COLORS",0,{POSITIVE:"bg-green-500/20 text-green-400",NEGATIVE:"bg-red-500/20 text-red-400",SERIAL_MISMATCH:"bg-orange-500/20 text-orange-400",LOCATION_MISMATCH:"bg-yellow-500/20 text-yellow-400"},"DIVERGENCE_TYPE_LABELS",0,{POSITIVE:"Sobra",NEGATIVE:"Falta",SERIAL_MISMATCH:"Serial Divergente",LOCATION_MISMATCH:"Local Incorreto"},"HIL_TASK_TYPE_LABELS",0,{ADJUSTMENT_APPROVAL:"Aprovacao de Ajuste",ENTRY_REVIEW:"Revisao de Entrada",TRANSFER_APPROVAL:"Aprovacao de Transferencia",DISPOSAL_APPROVAL:"Aprovacao de Baixa",NEW_PN_APPROVAL:"Aprovacao de Novo PN"},"PRIORITY_COLORS",0,{LOW:"bg-zinc-500/20 text-zinc-400",MEDIUM:"bg-blue-500/20 text-blue-400",HIGH:"bg-orange-500/20 text-orange-400",URGENT:"bg-red-500/20 text-red-400"},"PRIORITY_LABELS",0,{LOW:"Baixa",MEDIUM:"Media",HIGH:"Alta",URGENT:"Urgente"},"SGA_MOVEMENT_LABELS",0,{ENTRY:"Entrada",EXIT:"Saida",TRANSFER:"Transferencia",ADJUSTMENT_IN:"Ajuste (+)",ADJUSTMENT_OUT:"Ajuste (-)",RESERVE:"Reserva",UNRESERVE:"Liberacao",RETURN:"Reversa"},"SGA_STATUS_COLORS",0,{AVAILABLE:"bg-green-500/20 text-green-400 border-green-500/30",RESERVED:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",IN_TRANSIT:"bg-blue-500/20 text-blue-400 border-blue-500/30",WITH_CUSTOMER:"bg-magenta-mid/20 text-magenta-light border-magenta-mid/30",IN_REPAIR:"bg-orange-500/20 text-orange-400 border-orange-500/30",QUARANTINE:"bg-red-500/20 text-red-400 border-red-500/30",DISPOSED:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30"},"SGA_STATUS_LABELS",0,{AVAILABLE:"Disponivel",RESERVED:"Reservado",IN_TRANSIT:"Em Transito",WITH_CUSTOMER:"Com Cliente",IN_REPAIR:"Em Reparo",QUARANTINE:"Quarentena",DISPOSED:"Baixado"},"SGA_STORAGE_KEYS",0,{AGENTCORE_SESSION:"faiston_sga_agentcore_session",ASSET_FILTERS:"faiston_sga_asset_filters",MOVEMENT_FILTERS:"faiston_sga_movement_filters",OFFLINE_QUEUE:"faiston_sga_offline_queue",LAST_LOCATION:"faiston_sga_last_location",LAST_PROJECT:"faiston_sga_last_project",SCAN_HISTORY:"faiston_sga_scan_history",DRAFT_ENTRIES:"faiston_sga_draft_entries",USER_PREFERENCES:"faiston_sga_user_prefs"},"formatCurrency",()=>l])},8923,12507,8317,5252,21634,51782,65054,e=>{"use strict";var t=e.i(49973),a=e.i(18939),n=e.i(31993),r=e.i(64583);let s={search:"",part_number:void 0,location_id:void 0,project_id:void 0,status:void 0,date_from:void 0,date_to:void 0},o={search:"",type:void 0,part_number:void 0,location_id:void 0,project_id:void 0,date_from:void 0,date_to:void 0},i=(0,a.createContext)(void 0);function c({children:e}){let[c,u]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[_,f]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[m,y]=(0,a.useState)(null),[S,E]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),[A,h]=(0,a.useState)(()=>{try{let e=localStorage.getItem(n.SGA_STORAGE_KEYS.ASSET_FILTERS);return e?{...s,...JSON.parse(e)}:s}catch{return s}}),[C,T]=(0,a.useState)(()=>{try{let e=localStorage.getItem(n.SGA_STORAGE_KEYS.MOVEMENT_FILTERS);return e?{...o,...JSON.parse(e)}:o}catch{return o}}),[w,I]=(0,a.useState)([]),[R,k]=(0,a.useState)(()=>localStorage.getItem(n.SGA_STORAGE_KEYS.LAST_LOCATION)),[N,O]=(0,a.useState)(()=>localStorage.getItem(n.SGA_STORAGE_KEYS.LAST_PROJECT)),x=(0,a.useCallback)(async()=>{g(!0),y(null);try{let[e,t,a]=await Promise.all([(0,r.getPartNumbers)(),(0,r.getLocations)(),(0,r.getProjects)()]);u(e.data.part_numbers||[]),d(t.data.locations||[]),f(a.data.projects||[])}catch(e){y(e instanceof Error?e.message:"Erro ao carregar dados mestres"),console.error("[AssetManagement] Failed to load master data:",e)}finally{g(!1)}},[]),P=(0,a.useCallback)(async()=>{v(!0);try{let e=await (0,r.getDashboardSummary)();E(e.data)}catch(e){console.error("[AssetManagement] Failed to load dashboard:",e)}finally{v(!1)}},[]);(0,a.useEffect)(()=>{x(),P()},[x,P]),(0,a.useEffect)(()=>{localStorage.setItem(n.SGA_STORAGE_KEYS.ASSET_FILTERS,JSON.stringify(A))},[A]),(0,a.useEffect)(()=>{localStorage.setItem(n.SGA_STORAGE_KEYS.MOVEMENT_FILTERS,JSON.stringify(C))},[C]);let L=(0,a.useCallback)(e=>{h(t=>({...t,...e}))},[]),M=(0,a.useCallback)(()=>{h(s)},[]),G=(0,a.useCallback)(e=>{T(t=>({...t,...e}))},[]),D=(0,a.useCallback)(()=>{T(o)},[]),q=(0,a.useCallback)(e=>{I(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),j=(0,a.useCallback)(()=>{I([])},[]),U=(0,a.useCallback)(e=>{k(e),localStorage.setItem(n.SGA_STORAGE_KEYS.LAST_LOCATION,e)},[]),F=(0,a.useCallback)(e=>{O(e),localStorage.setItem(n.SGA_STORAGE_KEYS.LAST_PROJECT,e)},[]),B=(0,a.useMemo)(()=>new Map(c.map(e=>[e.id,e])),[c]),$=(0,a.useMemo)(()=>new Map(l.map(e=>[e.id,e])),[l]),V=(0,a.useMemo)(()=>new Map(_.map(e=>[e.id,e])),[_]),z=(0,a.useCallback)(e=>B.get(e),[B]),J=(0,a.useCallback)(e=>$.get(e),[$]),Y=(0,a.useCallback)(e=>V.get(e),[V]);return(0,t.jsx)(i,{value:{partNumbers:c,locations:l,projects:_,masterDataLoading:p,masterDataError:m,refreshMasterData:x,dashboardSummary:S,dashboardLoading:b,refreshDashboard:P,assetFilters:A,setAssetFilters:L,resetAssetFilters:M,movementFilters:C,setMovementFilters:G,resetMovementFilters:D,selectedAssetIds:w,setSelectedAssetIds:I,toggleAssetSelection:q,clearAssetSelection:j,lastLocationId:R,setLastLocationId:U,lastProjectId:N,setLastProjectId:F,getPartNumberById:z,getLocationById:J,getProjectById:Y},children:e})}function u(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAssetManagement must be used within an AssetManagementProvider");return e}e.s(["AssetManagementProvider",()=>c,"useAssetManagement",()=>u],12507);let l="sga_background_jobs",d=(0,a.createContext)(void 0);function _({children:e}){let[n,s]=(0,a.useState)("idle"),[o,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[_,f]=(0,a.useState)(()=>{try{let e=localStorage.getItem(l);if(!e)return[];let t=JSON.parse(e),a=Date.now()-36e5;return t.filter(e=>new Date(e.started_at).getTime()>a)}catch{return[]}});(0,a.useEffect)(()=>{localStorage.setItem(l,JSON.stringify(_))},[_]);let p=(0,a.useCallback)(e=>{f(t=>[...t,e])},[]),g=(0,a.useCallback)(e=>{f(t=>t.filter(t=>t.job_id!==e))},[]),m=(0,a.useCallback)((e,t,a)=>{f(n=>n.map(n=>n.job_id===e?{...n,status:t,message:a??n.message,completed_at:"completed"===t||"failed"===t?new Date().toISOString():n.completed_at}:n))},[]),y=(0,a.useCallback)(()=>_.some(e=>"smart_import"===e.type&&("queued"===e.status||"processing"===e.status)),[_]),S=(0,a.useCallback)(()=>_.filter(e=>"queued"===e.status||"processing"===e.status).length,[_]),E=(0,a.useCallback)(()=>{s("idle"),i(null),u(null)},[]),b=(0,a.useCallback)(async(e,t,a,n,o,c)=>{s("validating"),i(null);try{let i=await (0,r.validateOperation)({operation_type:e,part_number:t,quantity:a,source_location_id:n,destination_location_id:o,project_id:c});return u(i.data.validation),s("idle"),i.data.validation}catch(e){throw i(e instanceof Error?e.message:"Erro na validacao"),s("error"),e}},[]),v=(0,a.useCallback)(async e=>{s("processing"),i(null);try{let t=await (0,r.createReservation)(e);return s("success"),{success:!0,data:t.data.reservation,requiresApproval:t.data.requires_approval,hilTaskId:t.data.hil_task_id}}catch(t){let e=t instanceof Error?t.message:"Erro ao criar reserva";return i(e),s("error"),{success:!1,error:e}}},[]),A=(0,a.useCallback)(async(e,t)=>{s("processing"),i(null);try{return await (0,r.cancelReservation)({reservation_id:e,reason:t}),s("success"),{success:!0,data:!0}}catch(t){let e=t instanceof Error?t.message:"Erro ao cancelar reserva";return i(e),s("error"),{success:!1,error:e}}},[]),h=(0,a.useCallback)(async e=>{s("processing"),i(null);try{let t=await (0,r.processExpedition)(e);return s("success"),{success:!0,data:t.data.movement}}catch(t){let e=t instanceof Error?t.message:"Erro ao processar expedicao";return i(e),s("error"),{success:!1,error:e}}},[]),C=(0,a.useCallback)(async e=>{s("processing"),i(null);try{let t=await (0,r.createTransfer)(e);return s("success"),{success:!0,data:t.data.movement,requiresApproval:t.data.requires_approval,hilTaskId:t.data.hil_task_id}}catch(t){let e=t instanceof Error?t.message:"Erro ao criar transferencia";return i(e),s("error"),{success:!1,error:e}}},[]),T=(0,a.useCallback)(async e=>{s("processing"),i(null);try{let t=await (0,r.processReturn)(e);return s("success"),{success:!0,data:t.data.movement}}catch(t){let e=t instanceof Error?t.message:"Erro ao processar reversa";return i(e),s("error"),{success:!1,error:e}}},[]);return(0,t.jsx)(d,{value:{operationStatus:n,operationError:o,lastValidation:c,createNewReservation:v,cancelExistingReservation:A,processNewExpedition:h,createNewTransfer:C,processNewReturn:T,validateMovement:b,resetOperation:E,activeJobs:_,registerJob:p,removeJob:g,updateJobStatus:m,hasActiveImportJobs:y,getActiveJobCount:S},children:e})}function f(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useInventoryOperations must be used within an InventoryOperationsProvider");return e}e.s(["InventoryOperationsProvider",()=>_,"useInventoryOperations",()=>f],8317);let p=(0,a.createContext)(void 0);function g({children:e,pollingEnabled:n=!1,initialPollingInterval:s=3e4}){let[o,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[l,d]=(0,a.useState)(null),[_,f]=(0,a.useState)(null),[g,m]=(0,a.useState)(null),[y,S]=(0,a.useState)(n),[E,b]=(0,a.useState)(s),[v,A]=(0,a.useState)(null),h=(0,a.useRef)(null),C=o.reduce((e,t)=>("PENDING"===t.status&&(e[t.type]=(e[t.type]||0)+1),e),{}),T=o.filter(e=>"PENDING"===e.status).length,w=(0,a.useCallback)(async()=>{u(!0),d(null);try{let e=await (0,r.getPendingTasks)({type:_||void 0,status:g||void 0});i(e.data.tasks||[])}catch(e){d(e instanceof Error?e.message:"Erro ao carregar tarefas"),console.error("[TaskInbox] Failed to load tasks:",e)}finally{u(!1)}},[_,g]);(0,a.useEffect)(()=>{w()},[w]),(0,a.useEffect)(()=>(h.current&&(clearInterval(h.current),h.current=null),y&&E>0&&(h.current=setInterval(()=>{w()},E)),()=>{h.current&&clearInterval(h.current)}),[y,E,w]);let I=(0,a.useCallback)(async(e,t)=>{let a=await (0,r.approveTask)({task_id:e,notes:t});return i(t=>t.map(t=>t.id===e?{...t,status:"APPROVED",resolved_at:new Date().toISOString()}:t)),v?.id===e&&A(null),a.data},[v]),R=(0,a.useCallback)(async(e,t)=>{let a=await (0,r.rejectTask)({task_id:e,reason:t});return i(a=>a.map(a=>a.id===e?{...a,status:"REJECTED",resolved_at:new Date().toISOString(),resolution_notes:t}:a)),v?.id===e&&A(null),a.data},[v]),k=(0,a.useCallback)(e=>{S(e)},[]);return(0,t.jsx)(p,{value:{tasks:o,tasksLoading:c,tasksError:l,taskCounts:C,totalPending:T,refreshTasks:w,handleApprove:I,handleReject:R,typeFilter:_,setTypeFilter:f,statusFilter:g,setStatusFilter:m,isPolling:y,setPollingEnabled:k,pollingInterval:E,setPollingInterval:b,selectedTask:v,setSelectedTask:A},children:e})}function m(){let e=(0,a.useContext)(p);if(void 0===e)throw Error("useTaskInbox must be used within a TaskInboxProvider");return e}e.s(["TaskInboxProvider",()=>g,"useTaskInbox",()=>m],5252);let y=[{id:"balance",label:"Verificar saldo",query:"Qual o saldo disponivel de {part_number}?",icon:"Package"},{id:"locate",label:"Localizar serial",query:"Onde esta o serial {serial}?",icon:"MapPin"},{id:"docs",label:"Documentacao equipamento",query:"Onde encontro o manual do {part_number}?",icon:"FileText"},{id:"pending",label:"Reversas pendentes",query:"Quais reversas estao pendentes?",icon:"RotateCcw"},{id:"tasks",label:"Minhas tarefas",query:"Quais tarefas preciso aprovar?",icon:"CheckSquare"},{id:"lowstock",label:"Itens abaixo do minimo",query:"Quais itens estao abaixo do estoque minimo?",icon:"AlertTriangle"},{id:"movements",label:"Movimentacoes hoje",query:"Quais movimentacoes foram feitas hoje?",icon:"Activity"}],S=(0,a.createContext)(void 0);function E({children:e}){let[n,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[l,d]=(0,a.useState)(!1),[_,f]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),m=(0,a.useRef)(null),E=()=>`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,b=(0,a.useCallback)(()=>n.slice(-10).map(e=>({role:e.role,content:e.content})),[n]),v=(0,a.useCallback)(async(e,t)=>{m.current&&m.current.abort(),m.current=new AbortController;let a={id:E(),role:"user",content:e,timestamp:new Date().toISOString()};s(e=>[...e,a]),i(!0),u(null);try{let a=await (0,r.nexoEstoqueChat)({question:e,context:t,conversation_history:b()}),n={id:E(),role:"assistant",content:a.data.answer,timestamp:new Date().toISOString(),data:a.data.data,suggestions:a.data.suggestions};return s(e=>[...e,n]),a.data.suggestions?.length&&f(a.data.suggestions),a.data}catch(a){if(a instanceof Error&&"AbortError"===a.name)throw a;let e=a instanceof Error?a.message:"Erro ao processar sua pergunta";u(e);let t={id:E(),role:"assistant",content:`Desculpe, ocorreu um erro: ${e}. Por favor, tente novamente.`,timestamp:new Date().toISOString()};throw s(e=>[...e,t]),a}finally{i(!1)}},[b]),A=(0,a.useCallback)(async(e,t)=>{let a={id:E(),role:"user",content:e,timestamp:new Date().toISOString()};s(e=>[...e,a]),d(!0),u(null);try{let a=await (0,r.queryEquipmentDocs)({query:e,part_number:t,max_results:5}),n={id:E(),role:"assistant",content:a.data.answer||"Nenhuma informacao encontrada na base de conhecimento.",timestamp:new Date().toISOString(),citations:a.data.citations||[],data:{source:"knowledge_base",query:e}};s(e=>[...e,n]),f(["Mais detalhes sobre este equipamento","Como fazer a instalacao?","Quais sao as especificacoes tecnicas?"])}catch(a){let e=a instanceof Error?a.message:"Erro ao consultar base de conhecimento";u(e);let t={id:E(),role:"assistant",content:`Nao foi possivel consultar a documentacao: ${e}`,timestamp:new Date().toISOString()};s(e=>[...e,t])}finally{d(!1)}},[]),h=(0,a.useCallback)(()=>{s([]),u(null),f([])},[]),C=(0,a.useCallback)(()=>{g(e=>!e)},[]);return(0,t.jsx)(S,{value:{messages:n,isLoading:o,error:c,sendMessage:v,clearChat:h,queryKB:A,isQueryingKB:l,suggestions:_,setSuggestions:f,quickActions:y,isPanelOpen:p,setIsPanelOpen:g,togglePanel:C},children:e})}function b(){let e=(0,a.useContext)(S);if(void 0===e)throw Error("useNexoEstoque must be used within a NexoEstoqueProvider");return e}e.s(["NexoEstoqueProvider",()=>E,"useNexoEstoque",()=>b],21634);let v=(0,a.createContext)(void 0);function A({children:e}){let[n,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),[l,d]=(0,a.useState)([]),[_,f]=(0,a.useState)(0),[p,g]=(0,a.useState)([]),[m,y]=(0,a.useState)(!1),[S,E]=(0,a.useState)([]),[b,A]=(0,a.useState)(!1),[h,C]=(0,a.useState)([]),[T,w]=(0,a.useState)([]),[I,R]=(0,a.useState)(null),k=l[_]||null,N=l.filter(e=>e.counted).length,O=l.length>0?Math.round(N/l.length*100):0,x=(0,a.useCallback)(async()=>{i(!0);try{let e=await (0,r.getActiveCampaigns)();s(e.data.campaigns||[])}catch(e){console.error("[InventoryCount] Failed to load campaigns:",e)}finally{i(!1)}},[]);(0,a.useEffect)(()=>{x()},[x]);let P=(0,a.useCallback)(async e=>{let t=(await (0,r.startCampaign)(e)).data.campaign;return s(e=>[t,...e]),u(t),t},[]),L=(0,a.useCallback)(e=>{u(e),d([]),f(0),g([]),E([])},[]),M=(0,a.useCallback)(()=>{c&&(y(!0),f(0),w([]))},[c]),G=(0,a.useCallback)(()=>{y(!1),w([])},[]),D=(0,a.useCallback)(async e=>{if(!c)throw Error("Nenhuma campanha ativa");let t=await (0,r.submitCount)({campaign_id:c.id,...e});return d(t=>t.map((t,a)=>a===_?{...t,counted:!0,countedQuantity:e.counted_quantity,serialNumbersFound:e.serial_numbers_found}:t)),g(e=>[...e,t.data.count_result]),t.data.divergence&&E(e=>[...e,t.data.divergence]),w([]),t.data.count_result},[c,_]),q=(0,a.useCallback)(()=>{_<l.length-1&&(f(e=>e+1),w([]))},[_,l.length]),j=(0,a.useCallback)(()=>{_<l.length-1&&(f(e=>e+1),w([]))},[_,l.length]),U=(0,a.useCallback)(()=>{_>0&&(f(e=>e-1),w([]))},[_]),F=(0,a.useCallback)(e=>{e>=0&&e<l.length&&(f(e),w([]))},[l.length]),B=(0,a.useCallback)(async()=>{if(c){A(!0);try{let e=await (0,r.analyzeDivergences)(c.id);E(e.data.divergences||[])}catch(e){console.error("[InventoryCount] Failed to load divergences:",e)}finally{A(!1)}}},[c]),$=(0,a.useCallback)(async(e,t,a)=>{if(!c)throw Error("Nenhuma campanha ativa");let n=await (0,r.proposeAdjustment)({campaign_id:c.id,part_number:e,location_id:t,reason:a});return C(e=>[...e,n.data.proposal]),n.data.proposal},[c]),V=(0,a.useCallback)(e=>{w(t=>t.includes(e)?t:[...t,e]),R(e)},[]),z=(0,a.useCallback)(()=>{w([]),R(null)},[]);return(0,t.jsx)(v,{value:{campaigns:n,campaignsLoading:o,activeCampaign:c,countingItems:l,currentItemIndex:_,currentItem:k,countResults:p,divergences:S,divergencesLoading:b,adjustmentProposals:h,isCountingSessionActive:m,countingProgress:O,refreshCampaigns:x,startNewCampaign:P,selectCampaign:L,startCountingSession:M,endCountingSession:G,submitCountResult:D,skipCurrentItem:q,goToNextItem:j,goToPreviousItem:U,goToItem:F,loadDivergences:B,submitAdjustmentProposal:$,lastScannedSerial:I,addScannedSerial:V,clearScannedSerials:z,scannedSerials:T},children:e})}function h(){let e=(0,a.useContext)(v);if(void 0===e)throw Error("useInventoryCount must be used within an InventoryCountProvider");return e}e.s(["InventoryCountProvider",()=>A,"useInventoryCount",()=>h],51782);let C={submit_count:async t=>{let{submitCount:a}=await e.A(51927);return a(t)},create_reservation:async t=>{let{createReservation:a}=await e.A(51927);return a(t)},process_expedition:async t=>{let{processExpedition:a}=await e.A(51927);return a(t)},create_transfer:async t=>{let{createTransfer:a}=await e.A(51927);return a(t)},process_return:async t=>{let{processReturn:a}=await e.A(51927);return a(t)}},T=(0,a.createContext)(void 0);function w({children:e,initialAutoSync:r=!0,initialSyncInterval:s=6e4}){let[o,i]=(0,a.useState)("undefined"==typeof navigator||navigator.onLine),[c,u]=(0,a.useState)(()=>{try{let e=localStorage.getItem(n.SGA_STORAGE_KEYS.OFFLINE_QUEUE);return e?JSON.parse(e):[]}catch{return[]}}),[l,d]=(0,a.useState)("idle"),[_,f]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),[m,y]=(0,a.useState)(r),[S,E]=(0,a.useState)(s),b=(0,a.useRef)(null),v=(0,a.useRef)(!1),A=c.length,h=c.filter(e=>e.retries<3).length;(0,a.useEffect)(()=>{localStorage.setItem(n.SGA_STORAGE_KEYS.OFFLINE_QUEUE,JSON.stringify(c))},[c]),(0,a.useEffect)(()=>{let e=()=>{i(!0),d("idle")},t=()=>{i(!1),d("offline")};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);let w=(0,a.useCallback)((e,t)=>{let a=`offline-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={id:a,action:e,payload:t,created_at:new Date().toISOString(),retries:0};return u(e=>[...e,n]),a},[]),I=(0,a.useCallback)(e=>{u(t=>t.filter(t=>t.id!==e))},[]),R=(0,a.useCallback)(()=>{u([]),g(null)},[]),k=(0,a.useCallback)(async e=>{let t=C[e.action];if(!t)return console.error(`[OfflineSync] Unknown action: ${e.action}`),!1;try{return await t(e.payload),!0}catch(a){let t=a instanceof Error?a.message:"Unknown error";return console.error(`[OfflineSync] Failed to process ${e.action}:`,t),u(a=>a.map(a=>a.id===e.id?{...a,retries:a.retries+1,last_error:t}:a)),!1}},[]),N=(0,a.useCallback)(async e=>{let t=c.find(t=>t.id===e);!t||(o?await k(t)&&I(e):g("Sem conexao com a internet"))},[c,o,k,I]),O=(0,a.useCallback)(async()=>{if(v.current)return;if(!o)return void d("offline");let e=c.filter(e=>e.retries<3);if(0===e.length)return void d("idle");v.current=!0,d("syncing"),g(null);let t=0;for(let a of e)await k(a)?I(a.id):t++;v.current=!1,f(new Date().toISOString()),t>0?(d("error"),g(`${t} item(s) falharam ao sincronizar`)):d("idle")},[c,o,k,I]);return(0,a.useEffect)(()=>(b.current&&(clearInterval(b.current),b.current=null),m&&S>0&&o&&(b.current=setInterval(()=>{c.length>0&&O()},S)),()=>{b.current&&clearInterval(b.current)}),[m,S,o,c.length,O]),(0,a.useEffect)(()=>{if(o&&c.length>0&&m){let e=setTimeout(O,2e3);return()=>clearTimeout(e)}},[o,c.length,m,O]),(0,t.jsx)(T,{value:{isOnline:o,queue:c,queueLength:A,pendingCount:h,syncStatus:l,lastSyncAt:_,syncError:p,addToQueue:w,removeFromQueue:I,clearQueue:R,retryItem:N,syncAll:O,autoSyncEnabled:m,setAutoSyncEnabled:y,autoSyncInterval:S,setAutoSyncInterval:E},children:e})}e.s(["OfflineSyncProvider",()=>w],65054),e.s([],8923)}]);